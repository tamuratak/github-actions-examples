name: CI

on: [push]

jobs:
  build:

    runs-on: windows-latest
    timeout-minutes: 5
    steps:
    - uses: actions/checkout@v1
    - name: Set up PATH
      run: |
        echo "##[add-path]C:\Program Files\MiKTeX 2.9\miktex\bin\x64"
    - name: Donwload MiKTeX
      run: |
        curl -O -L https://miktex.org/download/win/miktexsetup-x64.zip
        unzip miktexsetup-x64.zip
    - name: Install MiKTeX
      run: |
        ./miktexsetup --verbose --local-package-repository=D:\temp\miktex --package-set=essential download
        ./miktexsetup --verbose --shared --local-package-repository=D:\temp\miktex --package-set=essential install
    - name: Run pdflatex
      run: |
        pdflatex --miktex-admin -interaction=nonstopmode t.tex
